---
layout: post
title: Matplotlib and basemap on Debian
category: computing
comments: false
---


Some installation instructions.
<!--more-->

## Installation
You will need to install it from source.
It requires matplotlib.
If you try to use the Debian package of matplotlib, you will soon see it is too
old for basemap. Here is an example of an error :

``` python
ImportError: No module named axes_grid1 
```

So we need to install it from source. The latest (1.2.1) does not compile with
the following error :

``` bash
src/file_compat.h:4:32: error: numpy/npy_3kcompat.h: No such file or directory
In file included from src/backend_agg.cpp:42:
src/file_compat.h: In function ‘int npy_PyFile_CloseFile(PyObject*)’:
src/file_compat.h:125: warning: deprecated conversion from string constant to ‘char*’
src/backend_agg.cpp: In member function ‘Py::Object RendererAgg::write_rgba(const Py::Tuple&)’:
src/backend_agg.cpp:2040: error: ‘npy_PyFile_OpenFile’ was not declared in this scope
src/backend_agg.cpp:2050: error: ‘npy_PyFile_Dup’ was not declared in this scope
src/backend_agg.cpp:2054: error: ‘npy_PyFile_DupClose’ was not declared in this scope
src/backend_agg.cpp:2064: error: ‘npy_PyFile_DupClose’ was not declared in this scope
```

Going back to the previous version (1.2.0) works as a charm.

## Using it
If you try to plot something and display it with <ic>plt.show()</ic>, it is likely you
will not see something. So you need to change the backend ([see the
documentation for more
information](http://matplotlib.org/faq/usage_faq.html#what-is-a-backend)).

Choosing the correct backend depends on what you have installed. In any case, you
have to create a file named <ic>matplotlibrc</ic> in <ic>$HOME/.matplotlib
</ic>. Then put the chosen backend. I use 

``` bash
backend      : Qt4Agg
```

If you chose to use GTK, you may have the following error :

``` python
ImportError: No module named _backend_gdk 
```

Then you have to reinstall matplotlib with GTK support. For that, copy <ic>setup.cfg.template</ic> to <ic>setup.cfg</ic> and uncomment the following :

``` bash
gtk = True
gtkagg = True
backend = GTK
```

Finally, run the install again.
