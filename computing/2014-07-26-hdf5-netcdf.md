---
layout: post
title: Installing HDF5 and netCDF from source
category: computing
comments: false
---


The main steps to compile and install parallel HDF5 and netCDF, both with
Fortran support. 
<!--more-->
This post is an attempt to properly document the installation
of both libraires and is an extension of the previous post about <ic>h5py</ic>.


Please note we will install everything in <ic>/usr/local</ic>.

## Building parallel HDF5 1.8.13 from source for Fortran

After getting the sources, configure HDF5 
``` bash
$ CC=mpicc CFLAGS=-fPIC ./configure --prefix=/usr/local --enable-fortran 
```

If you want to use <ic>h5py</ic> later on (as explained in 
[this post]({% post_url 2014-04-02-rant-h5py %})), I recommend to use the following:
``` bash
$ ./configure --enable-fortran --enable-parallel --prefix=/usr/local --enable-shared 
$ make
```

Then compile and install:

``` bash
$ make
$ make install
```

## Building NetCDF 4.3.2 with HDF5 support

Get the latest C-version [on github](https://github.com/Unidata/netcdf-c) if
you do not want to have an "<ic>undefined reference to H5Pset_fapl_mpiposix</ic>". At the
time of this writing, the version was 4.3.3-rc1. Then install it with:

``` bash
$ CC=mpicc CPPFLAGS=-I/usr/local/include LDFLAGS=-L/usr/local/lib ./configure --prefix=/usr/local
$ make
$ make install
```

Then get the Fortran version of netCDF (they are now separated). I used the
4.4.0. Set the installation with:

``` bash
$ export LD_LIBRARY_PATH=/usr/local/lib
$ ./configure --prefix=/usr/local
```

Do not forget to export <ic>LD_LIBRARY_PATH</ic> somewhere in your <ic>.bashrc</ic> too.
